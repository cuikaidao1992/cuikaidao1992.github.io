<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="renderer" content="webkit">
	<meta http-equiv="Cache-Control" content="no-siteapp" />

	<title>机构管理</title>

	<link rel="shortcut icon" href="../../dep/moban/img/favicon.png" type="image/x-icon">
	<!--Basic Styles-->
	<link href="../../dep/moban/css/bootstrap.min.css" rel="stylesheet" />
	<link href="../../dep/moban/css/font-awesome.min.css" rel="stylesheet" />
	<link href="../../dep/moban/css/weather-icons.min.css" rel="stylesheet" />

	<!--Beyond styles-->
	<link href="../../dep/moban/css/beyond.min.css" rel="stylesheet" />
	<link href="../../dep/moban/css/demo.min.css" rel="stylesheet" />
	<link href="../../dep/moban/css/typicons.min.css" rel="stylesheet" />
	<link href="../../dep/moban/css/animate.min.css" rel="stylesheet" />
	<!---->
	<link href="../../dep/moban/css/dataTables.bootstrap.css" rel="stylesheet" />
	<link rel="stylesheet" href="../../home/common/css.css">
	<link rel="stylesheet" href="../../dep/zTreeStyle/zTreeStyle.min.css" />
	<link rel="stylesheet" href="../../home/sysconfig/sysconfig.css" />

	<!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
	<script src="../../dep/moban/js/skins.min.js"></script>
	<style>
		#registrationForm input {
			width: 80%;
		}

		#registrationForm select,
		textarea {
			width: 80%;
		}

		#editDepart input {
			width: 80%;
		}

		#editDepart select,
		textarea {
			width: 80%;
		}
	</style>
</head>
<body>
	<div class="wrapper">
			<div class="page-breadcrumbs">
				<ul class="breadcrumb">
					<li>
						<i class="fa fa-home"></i>
						<a href="index.html">系统配置管理</a>
					</li>
					<li class="active">
						<a href="###">机构管理</a>
					</li>
				</ul>
			</div>
			<div class="page-header position-relative">
				<div class="header-title">
					<h1>机构管理</h1>
				</div>
				<!--Header Buttons-->
				<div class="header-buttons">
					<a class="sidebar-toggler" href="#">
						<i class="fa fa-arrows-h"></i>
					</a>
					<a class="refresh" id="refresh-toggler" href="">
						<i class="glyphicon glyphicon-refresh"></i>
					</a>
					<a class="fullscreen" id="fullscreen-toggler" href="#">
						<i class="glyphicon glyphicon-fullscreen"></i>
					</a>
				</div>
				<!--头部按钮end-->
			</div>
			<div class="page-body">
				<div class="row">
					<div class="col-xs-2 col-md-2">
						<!-- 组织机构树 -->
						<div class="widget flat radius-bordered">
							<div class="widget-header bg-sky">
								<span class="widget-caption">组织机构</span>
								<div class="widget-buttons">
									<a href="#" data-toggle="collapse">
										<i class="fa fa-minus"></i>
									</a>
								</div>
							</div>
							<div class="widget-body">
								<ul id="tree" class="ztree"></ul>
							</div>
						</div>
					</div>

					<div class="col-xs-10 col-md-10">

						<div class="tabbable">
							<ul class="nav nav-tabs" id="myTab">
								<li class="active">
									<a id="tab-list" data-toggle="tab" href="#home">
											 机构列表
										</a>
								</li>

								<li class="tab-red">
									<a id="tab-add" data-toggle="tab" href="#profile">机构添加</a>
								</li>
								<li class="tab-blue">
									<a id="tab-edit" data-toggle="tab" href="#editDepart" style="display: none;">机构编辑</a>
								</li>
							</ul>

							<div class="tab-content">
								<div id="home" class="tab-pane in active">
									<div class="table-toolbar">
										<a href="javascript:deleteBatch()" class="btn btn-darkorange col-padd">
											<i class="fa fa-minus"></i>批量删除
										</a>
									</div>
									<table class="table table-striped table-hover table-bordered" id="bodyHtml">
										<thead>
											<tr role="row">
												<th width="5%">
													<label>
												<input type="checkbox"  id="hvtck">
												<span class="text" id="dohovertree"></span>

											</label>
												</th>
												<th>
													机构名称 <span class="fa indicator fa-unsorted"></span>
												</th>
												<th>
													归属区域 <span class="fa indicator fa-unsorted"></span>
												</th>
												<th>
													机构编码 <span class="fa indicator fa-unsorted"></span>
												</th>
												<th>
													机构类型 <span class="fa indicator fa-unsorted"></span>
												</th>
												<th>
													备注 <span class="fa indicator fa-unsorted"></span>
												</th>
												<th width="20%">
													操作<span class="fa indicator fa-unsorted"></span>
												</th>
											</tr>
										</thead>

										<tbody>
											<tr>
												<td>
													<label>
												<input type="checkbox" name="myHoverTreechk">
												<span class="text"></span>
											</label>
												</td>
												<td><input type="text" class="six" value="市场部" disabled="disabled"></td>
												<td><input type="text" class="six" value="济南分公司" class="namese" disabled="disabled"></td>
												<td><input type="text" class="six" value="11111111" disabled="disabled"></td>
												<td>
													<input type="text" value="部门" class="six" disabled="disabled">
												</td>
												<td><input type="text" class="six" value="很好" disabled="disabled"></td>
												<td>
													<a href="#" class="btn btn-info btn-xs editClass"></i> 修改</a>
													<a href="#" class="btn btn-danger btn-xs removeClass"><i class="fa fa-trash-o"></i> 删除</a>
												</td>
											</tr>
											<tr>
												<td>
													<label>
												<input type="checkbox" name="myHoverTreechk">
												<span class="text"></span>
											</label>
												</td>
												<td><input type="text" class="six" value="市场部" disabled="disabled"></td>
												<td><input type="text" class="six" value="济南分公司" class="namese" disabled="disabled"></td>
												<td><input type="text" class="six" value="11111111" disabled="disabled"></td>
												<td>
													<input type="text" value="部门" class="six" disabled="disabled">
												</td>
												<td><input type="text" class="six" value="很好" disabled="disabled"></td>
												<td>
													<a href="#" class="btn btn-info btn-xs editClass"></i> 修改</a>
													<a href="#" class="btn btn-danger btn-xs removeClass"><i class="fa fa-trash-o"></i> 删除</a>
												</td>
											</tr>
											<tr>
												<td>
													<label>
												<input type="checkbox" name="myHoverTreechk">
												<span class="text"></span>
											</label>
												</td>
												<td><input type="text" class="six" value="市场部" disabled="disabled"></td>
												<td><input type="text" class="six" value="济南分公司" class="namese" disabled="disabled"></td>
												<td><input type="text" class="six" value="11111111" disabled="disabled"></td>
												<td>
													<input type="text" value="部门" class="six" disabled="disabled">
												</td>
												<td><input type="text" class="six" value="很好" disabled="disabled"></td>
												<td>
													<a href="#" class="btn btn-info btn-xs editClass"></i> 修改</a>
													<a href="#" class="btn btn-danger btn-xs removeClass"><i class="fa fa-trash-o"></i> 删除</a>
												</td>
											</tr>
										</tbody>
									</table>
									<div class="btn-font">
										<div class="zjtm">
											显示1到7共7个条目
										</div>
										<div class="zjrightb">
											<ul class="pagination pull-right">
												<li class="footable-page-arrow disabled"><a data-page="first" href="#first">«</a></li>
												<li class="footable-page-arrow disabled"><a data-page="prev" href="#prev">上一页</a></li>
												<li class="footable-page active"><a data-page="0" href="#">1</a></li>
												<li class="footable-page"><a data-page="1" href="#">2</a></li>
												<li class="footable-page-arrow"><a data-page="next" href="#next">下一页</a></li>
												<li class="footable-page-arrow"><a data-page="last" href="#last">»</a></li>
											</ul>
										</div>
									</div>
								</div>
								<!-- 新增机构 form -->
								<div id="profile" class="tab-pane">

									<form method="post" class="form-horizontal" data-bv-message="数据无效" data-bv-feedbackicons-valid="glyphicon glyphicon-ok" data-bv-feedbackicons-invalid="glyphicon glyphicon-remove" data-bv-feedbackicons-validating="glyphicon glyphicon-refresh">
										<div class="form-group">
											<label class="col-lg-4 control-label">上级机构</label>
											<div class="col-lg-6">
												<div class="input-group">
													<input type="text" class="form-control">
													<span class="input-group-btn">
														<a href="#deparment" data-toggle="modal" class="btn btn-default shiny" type="button" style="line-height: 20px">选择</a>
													</span>
												</div>
											</div>
										</div>
										<div class="form-group">
											<label class="col-lg-4 control-label">归属区域</label>
											<div class="col-lg-6">
												<select name="depart" class="form-control">
												  <option value="0" selected="selected">请选择</option>
												  <option value="1">山东分公司</option>
												  <option value="2">济宁分公司</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">机构名称<span class="help-inline"><font color="red">*</font> </span></label>
											<div class="col-lg-6">
												<input type="text" class="form-control" name="departName" data-bv-notempty="true" data-bv-notempty-message="机构名称不能为空" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">机构编码</label>
											<div class="col-lg-6">
												<input type="text" class="form-control" name="departCode" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">机构类型</label>
											<div class="col-lg-6">
												<select name="departType" class="form-control">
												  <option value="0" selected="selected">请选择</option>
												  <option value="1">公司</option>
												  <option value="2">部门</option>
												  <option value="3">小组</option>
												  <option value="4">其他</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">机构级别</label>
											<div class="col-lg-6">
												<select name="departLevel" class="form-control">
												  <option value="0" selected="selected">请选择</option>
												  <option value="1">一级</option>
												  <option value="2">二级</option>
												  <option value="3">三级</option>
												  <option value="4">四级</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">是否可用</label>
											<div class="col-lg-6">
												<input class="checkbox-slider" type="checkbox" checked="checked" >
												<span class="text" style="z-index: 0;"></span>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">主负责人</label>
											<div class="col-lg-6">
												<select name="majorPrincipal" class="form-control">
												  <option value="0" selected="selected">请选择</option>
												  <option value="1">小明</option>
												  <option value="2">小梅</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">副负责人</label>
											<div class="col-lg-6">
												<select name="subPrincipal" class="form-control">
												  <option value="0" selected="selected">请选择</option>
												  <option value="1">小小明</option>
												  <option value="2">小小梅</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">联系地址</label>
											<div class="col-lg-6">
												<input class="form-control" name="address" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">邮政编码</label>
											<div class="col-lg-6">
												<input class="form-control" name="ZIPCode" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">负责人</label>
											<div class="col-lg-6">
												<input class="form-control" name="principal" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">电话</label>
											<div class="col-lg-6">
												<input class="form-control" name="phone" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">传真</label>
											<div class="col-lg-6">
												<input class="form-control" name="fax" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">邮箱</label>
											<div class="col-lg-6">
												<input class="form-control" name="email" type="email" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">备注</label>
											<div class="col-lg-6">
												<textarea rows="3" name="note" style="width: 100%"></textarea>
											</div>
										</div>

										<div class="form-group">
											<div class="col-lg-offset-4 col-lg-6">
												<input class="btn btn-palegreen" type="submit" value="提交" />
											</div>
										</div>

									</form>
								</div>

								<div id="editDepart" class="tab-pane">

									<form id="editForm" method="post" class="form-horizontal" data-bv-message="数据无效" data-bv-feedbackicons-valid="glyphicon glyphicon-ok" data-bv-feedbackicons-invalid="glyphicon glyphicon-remove" data-bv-feedbackicons-validating="glyphicon glyphicon-refresh">

										<div class="form-group">
											<label class="col-lg-4 control-label">上级机构</label>
											<div class="col-lg-6">
												<input type="text" value="综合部"  class="form-control higher" readonly="readonly" data-bv-notempty="true" data-bv-notempty-message="机构名称不能为空"/>
												<a class="menuBtn" href="#" >选择</a>
											</div>
										</div>
										<div class="form-group">
											<label class="col-lg-4 control-label">归属区域</label>
											<div class="col-lg-6">
												<select name="depart" class="form-control">
												  <option value="0" >请选择</option>
												  <option value="1" selected="selected">山东分公司</option>
												  <option value="2">济宁分公司</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">机构名称<span class="help-inline"><font color="red">*</font> </span></label>
											<div class="col-lg-6">
												<input value="一个机构" type="text" class="form-control" name="departName" data-bv-notempty="true" data-bv-notempty-message="机构名称不能为空" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">机构编码</label>
											<div class="col-lg-6">
												<input value="xxxxxx" type="text" class="form-control" name="departCode" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">机构类型</label>
											<div class="col-lg-6">
												<select name="departType" class="form-control">
												  <option value="0" >请选择</option>
												  <option value="1" selected="selected">公司</option>
												  <option value="2">部门</option>
												  <option value="3">小组</option>
												  <option value="4">其他</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">机构级别</label>
											<div class="col-lg-6">
												<select name="departLevel" class="form-control">
												  <option value="0" >请选择</option>
												  <option value="1" selected="selected">一级</option>
												  <option value="2">二级</option>
												  <option value="3">三级</option>
												  <option value="4">四级</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">是否可用</label>
											<div class="col-lg-6">
												<input class="checkbox-slider" type="checkbox" checked="checked">
												<span class="text"></span>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">主负责人</label>
											<div class="col-lg-6">
												<select name="majorPrincipal" class="form-control">
												  <option value="0" >请选择</option>
												  <option value="1" selected="selected">小明</option>
												  <option value="2">小梅</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">副负责人</label>
											<div class="col-lg-6">
												<select name="subPrincipal" class="form-control">
												  <option value="0" >请选择</option>
												  <option value="1" selected="selected">小小明</option>
												  <option value="2">小小梅</option>
												</select>
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">联系地址</label>
											<div class="col-lg-6">
												<input value="山东济南历下区" class="form-control" name="address" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">邮政编码</label>
											<div class="col-lg-6">
												<input value="272100" class="form-control" name="ZIPCode" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">负责人</label>
											<div class="col-lg-6">
												<input value="小强" class="form-control" name="principal" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">电话</label>
											<div class="col-lg-6">
												<input value="15955555555" class="form-control" name="phone" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">传真</label>
											<div class="col-lg-6">
												<input value="2226666" class="form-control" name="fax" type="text" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">邮箱</label>
											<div class="col-lg-6">
												<input value="111@163.com" class="form-control" name="email" type="email" />
											</div>
										</div>

										<div class="form-group">
											<label class="col-lg-4 control-label">备注</label>
											<div class="col-lg-6">
												<textarea rows="3" name="note" style="width: 100%">哈哈哈啊哈哈</textarea>
											</div>
										</div>

										<div class="form-group">
											<div class="col-lg-offset-4 col-lg-6">
												<input class="btn btn-palegreen" type="submit" value="修改" />
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<P class="bottomfont">© 2016 Angel Health Management Ltd. : 天使健康管理有限公司</P>
	</div>
	<div class="modal fade in" aria-hidden="true" id="deparment">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button class="close" type="button" data-dismiss="modal">×</button>
					<h4 class="modal-title">选择机构</h4>
				</div>
				<div class="modal-body form-horizontal">
					<form action="">
						<div id="search" class="form-search">
							<label class="control-label col-lg-4">关键词：</label>
							<input class="form-control" type="text" style="width: 200px;display: inline-block;">
							<div style="display: inline-block;margin-left: 10px;">
								<a class="btn btn-primary"><i class="glyphicon glyphicon-search"></i>搜索</a>
							</div>
						</div>
						<div class="area-select" style="margin-top: 20px">
							<ul id="tree2" class="ztree col-lg-offset-4"></ul>
						</div>
						<div class="hr-line-dashed"></div>
						<div class="form-group">
							<div class="col-sm-10 col-sm-offset-2">
								<button class="btn btn-darkorange col-sm-3" type="submit">确定</button>
								<button class="btn btn-active col-sm-3 col-xs-offset-3" data-dismiss="modal" aria-hidden="true">取消</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!--Basic Scripts-->
	<script src="../../dep/moban/js/jquery-2.0.3.min.js"></script>
	<script src="../../dep/moban/js/bootstrap.min.js"></script>

	<!--Beyond Scripts-->
	<script src="../../dep/moban/js/beyond.min.js"></script>

	<!---->
	<script src="../../dep/moban/js/validation/bootstrapValidator.js"></script>
	<script src="../../dep/moban/js/fuelux/treeview/tree-custom.min.js"></script>
	<script src="../../dep/moban/js/fuelux/treeview/treeview-init.js"></script>
	<script src="../../dep/zTreeStyle/jquery.ztree.all.min.js"></script>


	<script>
		var setting = {data:{simpleData:{enable:true,idKey:"id",pIdKey:"pId",rootPId:'0'}},
			callback:{onClick:function(event, treeId, treeNode){
				var id = treeNode.id == '0' ? '' :treeNode.id;
				$('#officeContent').attr("src","/jeesite/a/sys/user/list?office.id="+id+"&office.name="+treeNode.name);
			}
			}
		};

		var zNodes =[{"id":"1","pId":"0","name":"山东省总公司","pIds":"0,"},{"id":"001880b64c584db8b5d846bee8d17a09","pId":"1","name":"鹿泉区机构","pIds":"0,1,"},{"id":"2","pId":"1","name":"公司领导","pIds":"0,1,"},{"id":"3","pId":"1","name":"综合部","pIds":"0,1,"},{"id":"4","pId":"1","name":"市场部","pIds":"0,1,"},{"id":"5","pId":"1","name":"技术部","pIds":"0,1,"},{"id":"6","pId":"1","name":"研发部","pIds":"0,1,"},{"id":"7","pId":"1","name":"济南市分公司","pIds":"0,1,"},{"id":"8","pId":"7","name":"公司领导","pIds":"0,1,7,"},{"id":"9","pId":"7","name":"综合部","pIds":"0,1,7,"},{"id":"10","pId":"7","name":"市场部","pIds":"0,1,7,"},{"id":"11","pId":"7","name":"技术部","pIds":"0,1,7,"},{"id":"12","pId":"7","name":"历城区分公司","pIds":"0,1,7,"},{"id":"13","pId":"12","name":"公司领导","pIds":"0,1,7,12,"},{"id":"14","pId":"12","name":"综合部","pIds":"0,1,7,12,"},{"id":"15","pId":"12","name":"市场部","pIds":"0,1,7,12,"},{"id":"16","pId":"12","name":"技术部","pIds":"0,1,7,12,"},{"id":"17","pId":"7","name":"历下区分公司","pIds":"0,1,7,"},{"id":"22","pId":"7","name":"高新区分公司","pIds":"0,1,7,"},{"id":"18","pId":"17","name":"公司领导","pIds":"0,1,7,17,"},{"id":"23","pId":"22","name":"公司领导","pIds":"0,1,7,22,"},{"id":"19","pId":"17","name":"综合部","pIds":"0,1,7,17,"},{"id":"24","pId":"22","name":"综合部","pIds":"0,1,7,22,"},{"id":"20","pId":"17","name":"市场部","pIds":"0,1,7,17,"},{"id":"25","pId":"22","name":"市场部","pIds":"0,1,7,22,"},{"id":"21","pId":"17","name":"技术部","pIds":"0,1,7,17,"},{"id":"26","pId":"22","name":"技术部","pIds":"0,1,7,22,"}]

		function expandNode(e) {
			var zTree = $.fn.zTree.getZTreeObj("treeDemo"),
					type = e.data.type,
					nodes = zTree.getSelectedNodes();
			if (type.indexOf("All")<0 && nodes.length == 0) {
				alert("请先选择一个父节点");
			}

			if (type == "expandAll") {
				zTree.expandAll(true);
			} else if (type == "collapseAll") {
				zTree.expandAll(false);
			} else {
				var callbackFlag = $("#callbackTrigger").attr("checked");
				for (var i=0, l=nodes.length; i<l; i++) {
					zTree.setting.view.fontCss = {};
					if (type == "expand") {
						zTree.expandNode(nodes[i], true, null, null, callbackFlag);
					} else if (type == "collapse") {
						zTree.expandNode(nodes[i], false, null, null, callbackFlag);
					} else if (type == "toggle") {
						zTree.expandNode(nodes[i], null, null, null, callbackFlag);
					} else if (type == "expandSon") {
						zTree.expandNode(nodes[i], true, true, null, callbackFlag);
					} else if (type == "collapseSon") {
						zTree.expandNode(nodes[i], false, true, null, callbackFlag);
					}
				}
			}
		}

		$(document).ready(function(){
			$.fn.zTree.init($("#tree"), setting, zNodes);
			var treeObj = $.fn.zTree.getZTreeObj("tree");
			treeObj.expandAll(true);
		});
		$('.menuBtn').click(function(){
		index = $(this).index('.menuBtn');

		var cityObj = $(this).siblings('.higher');
		var cityOffset = $(this).siblings('.higher').offset();
		$("#menuContent").css({left:cityOffset.left + "px", top:cityOffset.top + cityObj.outerHeight() + "px"}).slideDown("fast");

		$("body").bind("mousedown", onBodyDown);
	})

		function hideMenu() {
			$("#menuContent").fadeOut("fast");
			$("body").unbind("mousedown", onBodyDown);
		}

		function onBodyDown(event) {
			if (!(event.target.id == "menuBtn" || event.target.id == "menuContent" || $(event.target).parents("#menuContent").length>0)) {
				hideMenu();
			}
		}

		$(function() {

			$.fn.zTree.init($("#treeDemo"), setting, zNodes);

			$("#registrationForm").bootstrapValidator();
			$("#editForm").bootstrapValidator();
			UITree.init();
			$(".editClass").on('click', function() {
				editClass(this)
			});
			//编辑
			function editClass(_this) {
				$('#tab-edit').show();
				$('#tab-edit').click();
			}
			$(".removeClass").on('click', function() {
				removeClass(this)
			});
			// 删除
			function removeClass(_this) {
				$(_this).parent().parent().remove();
			}
			$('#tab-add,#tab-list').click(function() {
				$('#tab-edit').hide();
			})
		});
		window.onload = function() {
			var checkboxs = document.getElementsByName("myHove" + "rTreechk");
			var hvtck = document.getElementById("hvtck");
			cklen = checkboxs.length;
			hvtck.onclick = function() {
				if (this.checked == true) {
					for (var i = 0; i < cklen; i++) {
						checkboxs[i].checked = true;
					}
					document.getElementById("dohovert" + "ree").innerHTML = ""
				} else {
					for (var i = 0; i < cklen; i++) {
						checkboxs[i].checked = false;
					}
					document.getElementById("dohovertree").innerHTML = ""
				}
			}
		}

		function newDepart() {
			$('#tab-add').click();
		}

		function deleteBatch() {
			$('input[name="myHoverTreechk"]').each(function() {
				if ($(this).is(':checked'))
					$(this).parent().parent().parent().remove();
			})
		}

		/*上级机构*/
		var setting2 = {
			check: {
				enable: true
			},
			data: {
				simpleData: {
					enable: true
				}
			}
		};

		var zNodes2 ;
		var code2;
		function setCheck() {

			var zTree = $.fn.zTree.getZTreeObj("treeDemo"),
					py = $("#py").attr("checked")? "p":"",
					sy = $("#sy").attr("checked")? "s":"",
					pn = $("#pn").attr("checked")? "p":"",
					sn = $("#sn").attr("checked")? "s":"",
					type = { "Y":py + sy, "N":pn + sn};
			zTree.setting.check.chkboxType = type;
			showCode('setting.check.chkboxType = { "Y" : "' + type.Y + '", "N" : "' + type.N + '" };');
		}
		function showCode(str) {
			if (!code2) code2 = $("#code");
			code2.empty();
			code2.append("<li>"+str+"</li>");
		}
		function fuzhi(data){
			zNodes2=eval("("+data+")");
			$.fn.zTree.init($("#treeDemo"), setting2, zNodes2);

			setCheck();
			$("#py").bind("change", setCheck);
			$("#sy").bind("change", setCheck);
			$("#pn").bind("change", setCheck);
			$("#sn").bind("change", setCheck);

		}
		var zNodes2 =[
			{id:4, pId:0, name:"河北省"},
			{id:41, pId:4, name:"石家庄"},
			{id:42, pId:4, name:"保定"},
			{id:43, pId:4, name:"邯郸"},
			{id:44, pId:4, name:"承德"},
			{id:5, pId:0, name:"广东省"},
			{id:51, pId:5, name:"广州"}
		];

		$(document).ready(function(){
			$.fn.zTree.init($("#tree2"), setting2, zNodes2);
			var treeObj = $.fn.zTree.getZTreeObj("tree");
			treeObj.expandAll(true);
		});
	</script>
</body>
</html>